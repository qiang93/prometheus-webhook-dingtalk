
{{ define "__subject" }}[{{ .Status | toUpper }}{{ if eq .Status "firing" }}å‘Šè­¦:{{ .Alerts.Firing | len }}{{ else }}æ¢å¤{{ end }}]{{ end }} 
{{ define "__alertmanagerURL" }}{{ .ExternalURL }}/#/alerts?receiver={{ .Receiver }}{{ end }}

{{ define "__text_alert_list" }}
{{ if eq .Status "firing" }}
{{ range .Alerts.Firing }}
**åç§°: <font color=#FF0000 face="é»‘ä½“">{{ .Labels.alertname }}  </font>**  
**æ—¶é—´:** {{ ( .StartsAt.Add 28800e9 ).Format "2006-01-02 15:04:05" }}  
**ç¯å¢ƒ:** {{ .Labels.cluster }}  
**å›¾å½¢:** [ğŸ“ˆ]({{ .GeneratorURL }})  
**æ ‡ç­¾:**  
{{ range .Labels.SortedPairs }}> - {{ .Name }}: {{ .Value | markdown | html }}
{{ end }}
**<font color=#008000 size=3 face="é»‘ä½“">{{ .Annotations.description }}{{ .Annotations.message }}{{ .Annotations.summary }}</font>**  
{{ end }}

{{ else if eq .Status "resolved" }}
{{ range .Alerts.Resolved }} 
**åç§°: <font color=#FF0000 face="é»‘ä½“">{{ .Labels.alertname }}  </font>**  
**ç¯å¢ƒ:** {{ .Labels.cluster }}  
**è§¦å‘æ—¶é—´:** {{ ( .StartsAt.Add 28800e9 ).Format "2006-01-02 15:04:05" }}  
**æ¢å¤æ—¶é—´:** {{ ( .EndsAt.Add 28800e9 ).Format "2006-01-02 15:04:05" }}  
{{ end }}{{ end }}
{{ end }}


{{ define "__alertmanagerURL" }}{{ end }}
{{ define "ding.link.title" }}{{ template "__subject" . }}{{ end }}
{{ define "ding.link.content" }}#### [{{ if eq .Status "firing" }}å‘Šè­¦:{{ .Alerts.Firing | len }}{{ else }}æ¢å¤{{ end }}] **[{{ index .CommonLabels "severity" }}]({{ template "__alertmanagerURL" . }})**
{{ template "__text_alert_list" . }}
{{ end }}
